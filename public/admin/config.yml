backend:
  name: github
  repo: ashtyngon/epsteintransparencyact
  branch: main
  base_url: https://decap-oauth.ezrikson.workers.dev
  auth_endpoint: auth

publish_mode: editorial_workflow

media_folder: "public/images"
public_folder: "/images"

slug:
  encoding: "ascii"
  clean_accents: true
  sanitize_replacement: "-"

collections:

  # ─────────────────────────────────────────
  # ARTICLES
  # ─────────────────────────────────────────
  - name: "articles"
    label: "Articles"
    label_singular: "Article"
    folder: "src/content/articles"
    create: true
    delete: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    extension: "md"
    format: "yaml-frontmatter"
    sortable_fields: ["publishedAt", "title", "source", "status"]
    view_filters:
      - label: "Published"
        field: status
        pattern: "published"
      - label: "In Review"
        field: status
        pattern: "review"
      - label: "Draft"
        field: status
        pattern: "draft"
      - label: "News"
        field: articleType
        pattern: "news"
      - label: "Feature"
        field: articleType
        pattern: "feature"
      - label: "Analysis"
        field: articleType
        pattern: "analysis"
    view_groups:
      - label: "By Status"
        field: status
      - label: "By Type"
        field: articleType
    summary: "{{title}} — {{source}} ({{status}})"
    fields:
      - label: "Title"
        name: "title"
        widget: "string"
        hint: "Article headline"

      - label: "Published At"
        name: "publishedAt"
        widget: "datetime"
        format: "YYYY-MM-DDTHH:mm:ss.SSSZ"
        date_format: "YYYY-MM-DD"
        time_format: "HH:mm"

      - label: "Updated At"
        name: "updatedAt"
        widget: "datetime"
        format: "YYYY-MM-DDTHH:mm:ss.SSSZ"
        date_format: "YYYY-MM-DD"
        time_format: "HH:mm"
        required: false

      - label: "Source"
        name: "source"
        widget: "string"
        hint: "Publication name (e.g., BBC News, NYT, Reuters)"

      - label: "Source URL"
        name: "sourceUrl"
        widget: "string"
        hint: "URL to the original source article"

      - label: "Summary"
        name: "summary"
        widget: "text"
        hint: "Brief article summary (1-2 sentences)"

      - label: "Featured Image"
        name: "image"
        widget: "image"
        required: false
        media_folder: "/public/images/articles"
        public_folder: "/images/articles"
        hint: "Article header image"

      - label: "Status"
        name: "status"
        widget: "select"
        options:
          - { label: "Published", value: "published" }
          - { label: "Draft", value: "draft" }
          - { label: "In Review", value: "review" }
          - { label: "Unpublished", value: "unpublished" }
        default: "published"

      - label: "Article Type"
        name: "articleType"
        widget: "select"
        options:
          - { label: "News", value: "news" }
          - { label: "Feature", value: "feature" }
          - { label: "Analysis", value: "analysis" }
        default: "news"

      - label: "People"
        name: "people"
        widget: "relation"
        collection: "people"
        value_field: "{{slug}}"
        display_fields: ["{{name}} — {{role}}"]
        search_fields: ["name", "aliases", "role"]
        multiple: true
        required: false
        hint: "Search and select people mentioned in this article"

      - label: "Related Articles"
        name: "relatedArticles"
        widget: "relation"
        collection: "articles"
        value_field: "{{slug}}"
        display_fields: ["{{title}}"]
        search_fields: ["title", "source"]
        multiple: true
        required: false
        hint: "Search and link related articles"

      - label: "Tags"
        name: "tags"
        widget: "select"
        multiple: true
        required: false
        hint: "Select relevant tags"
        options:
          - { label: "Document Release", value: "document-release" }
          - { label: "Associates", value: "associates" }
          - { label: "Political", value: "political" }
          - { label: "Breaking", value: "breaking" }
          - { label: "Transparency Act", value: "transparency-act" }
          - { label: "Investigation", value: "investigation" }
          - { label: "Court Documents", value: "court-documents" }
          - { label: "Testimony", value: "testimony" }
          - { label: "FBI", value: "fbi" }
          - { label: "Survivors", value: "survivors" }
          - { label: "Victims", value: "victims" }
          - { label: "Legislation", value: "legislation" }
          - { label: "Records Review", value: "records-review" }

      - label: "Key Takeaways"
        name: "keyTakeaways"
        widget: "list"
        required: false
        hint: "Bullet points summarizing key facts"

      - label: "AI Generated"
        name: "aiGenerated"
        widget: "boolean"
        default: true
        hint: "Was this article generated by the AI pipeline?"

      - label: "Confidence Score"
        name: "confidence"
        widget: "number"
        value_type: "float"
        min: 0
        max: 1
        step: 0.01
        required: false
        hint: "AI confidence score (0-1)"

      - label: "Reviewed By"
        name: "reviewedBy"
        widget: "string"
        required: false

      - label: "Reviewed At"
        name: "reviewedAt"
        widget: "datetime"
        format: "YYYY-MM-DDTHH:mm:ss.SSSZ"
        required: false

      - label: "Body"
        name: "body"
        widget: "markdown"
        hint: "Article content in Markdown"

  # ─────────────────────────────────────────
  # PEOPLE
  # ─────────────────────────────────────────
  - name: "people"
    label: "People"
    label_singular: "Person"
    folder: "src/content/people"
    create: true
    delete: true
    slug: "{{slug}}"
    extension: "md"
    format: "yaml-frontmatter"
    identifier_field: "name"
    sortable_fields: ["name", "category", "role"]
    view_filters:
      - label: "Named in Documents"
        field: category
        pattern: "named-in-documents"
      - label: "Officials"
        field: category
        pattern: "official"
      - label: "Legal"
        field: category
        pattern: "legal"
      - label: "Associates"
        field: category
        pattern: "associate"
      - label: "Victim/Survivor"
        field: category
        pattern: "victim-survivor"
    view_groups:
      - label: "By Category"
        field: category
    summary: "{{name}} — {{role}} ({{category}})"
    fields:
      - label: "Name"
        name: "name"
        widget: "string"

      - label: "SEO Title"
        name: "seoTitle"
        widget: "string"
        required: false
        hint: "Custom SEO title (defaults to name if blank)"

      - label: "SEO Description"
        name: "seoDescription"
        widget: "text"
        required: false
        hint: "Meta description for search engines"

      - label: "Role"
        name: "role"
        widget: "string"
        hint: "Title or profession"

      - label: "Category"
        name: "category"
        widget: "select"
        options:
          - { label: "Named in Documents", value: "named-in-documents" }
          - { label: "Witness", value: "witness" }
          - { label: "Associate", value: "associate" }
          - { label: "Official", value: "official" }
          - { label: "Legal", value: "legal" }
          - { label: "Victim / Survivor", value: "victim-survivor" }
          - { label: "Other", value: "other" }

      - label: "Short Bio"
        name: "shortBio"
        widget: "text"
        hint: "1-2 sentence biography"

      - label: "Photo"
        name: "image"
        widget: "image"
        required: false
        media_folder: "/public/images/people"
        public_folder: "/images/people"

      - label: "Aliases"
        name: "aliases"
        widget: "list"
        required: false
        hint: "Alternative names (e.g., 'Professor Dershowitz')"

      - label: "Notable Connections"
        name: "notableConnections"
        widget: "relation"
        collection: "people"
        value_field: "{{slug}}"
        display_fields: ["{{name}} — {{role}}"]
        search_fields: ["name", "aliases"]
        multiple: true
        required: false
        hint: "Search and select connected individuals"

      - label: "First Mentioned Date"
        name: "firstMentionedDate"
        widget: "datetime"
        format: "YYYY-MM-DD"
        date_format: "YYYY-MM-DD"
        time_format: false
        required: false

      - label: "Sources"
        name: "sources"
        widget: "list"
        required: false
        fields:
          - { label: "Title", name: "title", widget: "string" }
          - { label: "URL", name: "url", widget: "string" }

      - label: "Sensitive"
        name: "sensitive"
        widget: "boolean"
        default: false
        hint: "Flag for individuals requiring careful handling"

      - label: "Profile"
        name: "body"
        widget: "markdown"
        hint: "Full profile content in Markdown"

  # ─────────────────────────────────────────
  # TIMELINE
  # ─────────────────────────────────────────
  - name: "timeline"
    label: "Timeline"
    label_singular: "Event"
    folder: "src/content/timeline"
    create: true
    delete: true
    slug: "{{slug}}"
    extension: "md"
    format: "yaml-frontmatter"
    sortable_fields: ["date", "title", "era", "significance", "order"]
    view_filters:
      - label: "Major"
        field: significance
        pattern: "major"
      - label: "Origins"
        field: era
        pattern: "origins"
      - label: "First Prosecution"
        field: era
        pattern: "first-prosecution"
      - label: "Exposure"
        field: era
        pattern: "exposure"
      - label: "Reckoning"
        field: era
        pattern: "reckoning"
      - label: "Transparency"
        field: era
        pattern: "transparency"
    view_groups:
      - label: "By Era"
        field: era
      - label: "By Significance"
        field: significance
    summary: "{{title}} — {{date}} ({{era}})"
    fields:
      - label: "Title"
        name: "title"
        widget: "string"

      - label: "Date"
        name: "date"
        widget: "datetime"
        format: "YYYY-MM-DD"
        date_format: "YYYY-MM-DD"
        time_format: false

      - label: "End Date"
        name: "endDate"
        widget: "datetime"
        format: "YYYY-MM-DD"
        date_format: "YYYY-MM-DD"
        time_format: false
        required: false
        hint: "For multi-day events"

      - label: "Era"
        name: "era"
        widget: "select"
        options:
          - { label: "Origins", value: "origins" }
          - { label: "First Prosecution", value: "first-prosecution" }
          - { label: "Exposure", value: "exposure" }
          - { label: "Reckoning", value: "reckoning" }
          - { label: "Aftermath", value: "aftermath" }
          - { label: "Transparency", value: "transparency" }
        default: "origins"

      - label: "Category"
        name: "category"
        widget: "select"
        options:
          - { label: "Biography", value: "biography" }
          - { label: "Legal", value: "legal" }
          - { label: "Document Release", value: "document-release" }
          - { label: "Legislation", value: "legislation" }
          - { label: "Investigation", value: "investigation" }
          - { label: "Media", value: "media" }
          - { label: "Civil Litigation", value: "civil-litigation" }
          - { label: "Network", value: "network" }
          - { label: "Other", value: "other" }

      - label: "Summary"
        name: "summary"
        widget: "text"
        hint: "Brief event description"

      - label: "Significance"
        name: "significance"
        widget: "select"
        options:
          - { label: "Major", value: "major" }
          - { label: "Standard", value: "standard" }
          - { label: "Minor", value: "minor" }
        default: "standard"

      - label: "Image"
        name: "image"
        widget: "image"
        required: false
        media_folder: "/public/images/timeline"
        public_folder: "/images/timeline"

      - label: "Image Caption"
        name: "imageCaption"
        widget: "string"
        required: false

      - label: "Order"
        name: "order"
        widget: "number"
        value_type: "int"
        hint: "Numeric sort order"

      - label: "People"
        name: "people"
        widget: "relation"
        collection: "people"
        value_field: "{{slug}}"
        display_fields: ["{{name}} — {{role}}"]
        search_fields: ["name", "aliases"]
        multiple: true
        required: false
        hint: "Search and select people involved in this event"

      - label: "Related Articles"
        name: "relatedArticles"
        widget: "relation"
        collection: "articles"
        value_field: "{{slug}}"
        display_fields: ["{{title}}"]
        search_fields: ["title", "source"]
        multiple: true
        required: false
        hint: "Search and link related articles"

      - label: "Related Events"
        name: "relatedEvents"
        widget: "relation"
        collection: "timeline"
        value_field: "{{slug}}"
        display_fields: ["{{title}} — {{date}}"]
        search_fields: ["title"]
        multiple: true
        required: false
        hint: "Search and link related timeline events"

      - label: "Sources"
        name: "sources"
        widget: "list"
        required: false
        fields:
          - { label: "Title", name: "title", widget: "string" }
          - { label: "URL", name: "url", widget: "string" }

      - label: "Body"
        name: "body"
        widget: "markdown"
        hint: "Detailed event description in Markdown"

  # ─────────────────────────────────────────
  # SURVIVORS
  # ─────────────────────────────────────────
  - name: "survivors"
    label: "Survivors"
    label_singular: "Survivor Story"
    folder: "src/content/survivors"
    create: true
    delete: true
    slug: "{{slug}}"
    extension: "md"
    format: "yaml-frontmatter"
    sortable_fields: ["publishedAt", "title", "type"]
    summary: "{{title}} — {{type}}"
    fields:
      - label: "Title"
        name: "title"
        widget: "string"

      - label: "Published At"
        name: "publishedAt"
        widget: "datetime"
        format: "YYYY-MM-DDTHH:mm:ss.SSSZ"
        date_format: "YYYY-MM-DD"
        time_format: "HH:mm"

      - label: "Type"
        name: "type"
        widget: "select"
        options:
          - { label: "Statement", value: "statement" }
          - { label: "Coverage", value: "coverage" }
          - { label: "Profile", value: "profile" }
          - { label: "Resource", value: "resource" }

      - label: "Source"
        name: "source"
        widget: "string"
        required: false

      - label: "Source URL"
        name: "sourceUrl"
        widget: "string"
        required: false

      - label: "Content Warning"
        name: "contentWarning"
        widget: "string"
        required: false
        hint: "Optional content/trigger warning"

      - label: "Anonymous"
        name: "anonymous"
        widget: "boolean"
        default: false

      - label: "Image"
        name: "image"
        widget: "image"
        required: false
        media_folder: "/public/images/survivors"
        public_folder: "/images/survivors"

      - label: "Image Caption"
        name: "imageCaption"
        widget: "string"
        required: false

      - label: "People"
        name: "people"
        widget: "relation"
        collection: "people"
        value_field: "{{slug}}"
        display_fields: ["{{name}} — {{role}}"]
        search_fields: ["name", "aliases"]
        multiple: true
        required: false
        hint: "Search and select related people"

      - label: "Tags"
        name: "tags"
        widget: "select"
        multiple: true
        required: false
        options:
          - { label: "Document Release", value: "document-release" }
          - { label: "Associates", value: "associates" }
          - { label: "Political", value: "political" }
          - { label: "Breaking", value: "breaking" }
          - { label: "Transparency Act", value: "transparency-act" }
          - { label: "Investigation", value: "investigation" }
          - { label: "Court Documents", value: "court-documents" }
          - { label: "Testimony", value: "testimony" }
          - { label: "FBI", value: "fbi" }
          - { label: "Survivors", value: "survivors" }
          - { label: "Victims", value: "victims" }
          - { label: "Legislation", value: "legislation" }
          - { label: "Records Review", value: "records-review" }

      - label: "Body"
        name: "body"
        widget: "markdown"

  # ─────────────────────────────────────────
  # SITE SETTINGS
  # ─────────────────────────────────────────
  - name: "settings"
    label: "Settings"
    files:
      - label: "Site Settings"
        name: "site"
        file: "src/content/settings/site.json"
        fields:
          - { label: "Site Name", name: "siteName", widget: "string" }
          - { label: "Site Description", name: "siteDescription", widget: "text" }
          - { label: "Hero Title", name: "heroTitle", widget: "string" }
          - { label: "Hero Subtitle", name: "heroSubtitle", widget: "text" }
          - { label: "Hero CTA", name: "heroCta", widget: "string" }
          - label: "Social Links"
            name: "socialLinks"
            widget: "list"
            required: false
            fields:
              - { label: "Platform", name: "platform", widget: "string" }
              - { label: "URL", name: "url", widget: "string" }
          - { label: "Footer Text", name: "footerText", widget: "text" }
