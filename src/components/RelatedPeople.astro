---
import { getCollection } from 'astro:content';

interface Props {
  slugs: string[];
}

const { slugs } = Astro.props;

const allPeople = await getCollection('people');
const relatedPeople = allPeople.filter((p) => slugs.includes(p.id));
---

{relatedPeople.length > 0 && (
  <div class="pt-8 border-t-2 border-primary">
    <h2 class="text-sm font-semibold uppercase tracking-wider text-primary mb-4">
      People Mentioned
    </h2>
    <div class="flex flex-wrap gap-2">
      {relatedPeople.map((person) => (
        <a
          href={`/people/${person.id}`}
          class="flex items-center gap-2 text-sm font-medium text-primary border border-border px-3 py-1.5 hover:border-accent hover:text-accent transition-colors no-underline"
        >
          {person.data.image ? (
            <img
              src={person.data.image}
              alt=""
              class="w-5 h-5 rounded-full object-cover"
              loading="lazy"
            />
          ) : null}
          {person.data.name}
        </a>
      ))}
    </div>
  </div>
)}
