---
import type { CollectionEntry } from 'astro:content';

interface Props {
  person: CollectionEntry<'people'>;
}

const { person } = Astro.props;
const { name, role, category, shortBio } = person.data;

const categoryLabels: Record<string, string> = {
  'named-in-documents': 'Named in Documents',
  witness: 'Witness',
  associate: 'Associate',
  official: 'Official',
  legal: 'Legal',
  'victim-survivor': 'Victim/Survivor',
  other: 'Other',
};

const categoryColors: Record<string, string> = {
  'named-in-documents': 'bg-highlight/10 text-highlight',
  witness: 'bg-yellow-100 text-yellow-800',
  associate: 'bg-red-100 text-red-800',
  official: 'bg-blue-100 text-blue-800',
  legal: 'bg-purple-100 text-purple-800',
  'victim-survivor': 'bg-green-100 text-green-800',
  other: 'bg-gray-100 text-gray-800',
};
---

<a
  href={`/people/${person.id}`}
  class="block bg-white rounded-lg border border-border p-4 hover:shadow-md transition-shadow no-underline"
>
  <div class="flex items-start justify-between gap-2 mb-2">
    <h3 class="text-base font-semibold text-primary hover:text-accent transition-colors">
      {name}
    </h3>
    <span class:list={[
      'text-xs font-medium px-2 py-0.5 rounded-full whitespace-nowrap',
      categoryColors[category] || 'bg-gray-100 text-gray-800',
    ]}>
      {categoryLabels[category] || category}
    </span>
  </div>

  <p class="text-sm text-text-muted mb-1">{role}</p>
  <p class="text-sm text-text-muted leading-relaxed line-clamp-2">{shortBio}</p>
</a>
