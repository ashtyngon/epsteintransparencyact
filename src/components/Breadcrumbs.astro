---
import { breadcrumbJsonLd } from '../utils/json-ld';

interface Props {
  items: { name: string; href: string }[];
}

const { items } = Astro.props;
const siteUrl = 'https://epsteintransparencyact.com';

const fullItems = [
  { name: 'Home', href: '/' },
  ...items,
];

const jsonLd = breadcrumbJsonLd(
  fullItems.map((item) => ({
    name: item.name,
    url: `${siteUrl}${item.href}`,
  }))
);
---

<nav aria-label="Breadcrumb" class="text-xs mb-4">
  <ol class="flex flex-wrap items-center gap-1 text-white/40">
    {fullItems.map((item, i) => (
      <li class="flex items-center gap-1">
        {i > 0 && <span class="text-white/20">/</span>}
        {i === fullItems.length - 1 ? (
          <span class="text-white/60 truncate max-w-[200px] sm:max-w-none" aria-current="page">{item.name}</span>
        ) : (
          <a href={item.href} class="hover:text-white/80 transition-colors">{item.name}</a>
        )}
      </li>
    ))}
  </ol>
</nav>

<script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />
